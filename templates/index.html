<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>2D ì˜ìƒê³¼ ê¹Šì´ ì •ë³´ í™œìš©í•œ BMI ì˜ˆì¸¡</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style> 
#modalContainer {
    width: 100%;
    height: 100%;
    position: fixed;
    top: 0;
    left: 0;
    display: flex;
    justify-content: center; /* ê°€ë¡œ ì •ë ¬ */
    align-items: flex-start; /* ì„¸ë¡œ ì •ë ¬ */
    background: rgba(0, 0, 0, 0.5); /* ë°˜íˆ¬ëª… ê²€ì • ë°°ê²½ */
    z-index: 9999;
    padding: 0; /* ì—¬ë°± ì œê±° */
    padding-top: 200px;
}

#modalContainer.hidden {
    display: none; /* ìˆ¨ê¹€ ìƒíƒœ */
}

#modalContent {
    position: relative;
    background-color: #FFFBEA; /* ë°ì€ í¬ë¦¼ìƒ‰ ë°°ê²½ */
    width: 370px;
    height: 180px;
    padding: 15px;
    text-align: center;
    border-radius: 12px; /* ë‘¥ê·¼ í…Œë‘ë¦¬ */
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1); /* ê·¸ë¦¼ì íš¨ê³¼ */
    border: 1px solid #FFD700; /* ì–‡ì€ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ */
    font-family: 'GangwonEdu_OTFBoldA', 'Noto Sans KR', sans-serif; /* ì†ê¸€ì”¨ ëŠë‚Œ */
    font-size: large;
    transform: rotate(-2deg); /* ì‚´ì§ ë¹„ìŠ¤ë“¬í•œ ê°ë„ */
}

#modalContent::before {
    content: '';
    position: absolute;
    top: -8px;
    left: 20px;
    width: 80%;
    height: 10px;
    background-color: #FFD700; /* í…Œì´í”„ ëŠë‚Œì˜ ê°•ì¡°ì„  */
    border-radius: 5px;
    transform: rotate(-5deg); /* ì•½ê°„ ê¸°ìš¸ì„ */
}

#modalCloseButton { 
    background-color: #E57373; /* ë¶€ë“œëŸ¬ìš´ ë¹¨ê°„ìƒ‰ */
    color: white;
    border: none;
    border-radius: 8px;
    padding: 5px 10px;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
    margin-right: 5px; /* ë²„íŠ¼ ê°„ê²© */
}

#modalCloseButton:hover {
    background-color: #D32F2F;
}

#modalConfirmButton {
    background-color: #4FC3F7; /* ë°ì€ íŒŒë€ìƒ‰ */
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
}

#modalConfirmButton:hover {
    background-color: #0288D1;
}
        @font-face {
            font-family: 'GangwonEdu_OTFBoldA';
            src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2201-2@1.0/GangwonEdu_OTFBoldA.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50 font-['Noto_Sans_KR']" >
    <div class="max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <header class="text-center mb-12">
            <h1 class="text-3xl font-bold text-gray-900 mb-4">
                Upload and Analyze Images</h1>
            <p class="text-gray-600">Upload your image to view the analysis results.</p>
        </header>

        <div class="max-w-3xl mx-auto bg-white rounded-lg shadow-sm p-8">
            <!-- ì—…ë¡œë“œ í¼ -->
            <div id="uploadSection">
                <form id="uploadForm" action="/process" method="POST" enctype="multipart/form-data" onsubmit="showLoading()">
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center" id="dropZone">
                        <input type="file" name="file" id="fileInput" class="hidden" accept="image/*" required>
                        <div class="space-y-4">
                            <i class="fas fa-cloud-upload-alt text-4xl text-custom"></i>
                            <div>
                                <p class="text-gray-700 mb-2">Drag and drop your image here, or</p>
                                <button type="button" id="fileSelectButton" style="background-color: black;" class="text-white px-6 py-2 rounded hover:bg-gray-700 transition-colors">
                                    Choose File
                                </button>
                            </div>
                            <p class="text-sm text-gray-500">Supported formats: JPG, PNG, GIF (maximum 10MB).</p>
                        </div>
                    </div>
                </form>
            </div>

            <!-- ë¡œë”© ìƒíƒœ -->
            <div id="loadingSection" class="hidden text-center py-8">
                <div class="flex flex-col items-center">
                    <div class="loader border-t-4 border-custom rounded-full w-16 h-16 mb-4 animate-spin"></div>
                    <p class="text-gray-700">
                        "Processing the image. Please wait a moment..."</p>
                </div>
            </div>

            <!-- ëª¨ë‹¬ -->
            <div id="modalContainer" class="hidden">
                <div id="modalContent">
                    <p>ğŸš¨ì£¼ì˜ì‚¬í•­ğŸš¨<br>ì˜·ì´ ë‘êº¼ìš°ë©´ ë¶„ì„ ê²°ê³¼ê°€ ë¶€ì •í™•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!<br>ì–‡ì€ ì˜·ì„ ì…ì—ˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”!</p>
                    <button id="modalConfirmButton">ì•Œê² ìŠµë‹ˆë‹¤</button>
                    <button id="modalCloseButton">ë‹«ê¸°</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const fileSelectButton = document.getElementById('fileSelectButton');
        const fileInput = document.getElementById('fileInput');
        const modalContainer = document.getElementById('modalContainer');
        const modalConfirmButton = document.getElementById('modalConfirmButton');
        const modalCloseButton = document.getElementById('modalCloseButton');
        const uploadSection = document.getElementById('uploadSection');
        const loadingSection = document.getElementById('loadingSection');

        // íŒŒì¼ ì„ íƒ ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ í‘œì‹œ
        fileSelectButton.addEventListener('click', () => {
            modalContainer.classList.remove('hidden');
        });

        // ëª¨ë‹¬ "ì•Œê² ìŠµë‹ˆë‹¤" ë²„íŠ¼ í´ë¦­ ì‹œ íŒŒì¼ ì„ íƒ ì°½ ì—´ê¸°
        modalConfirmButton.addEventListener('click', () => {
            modalContainer.classList.add('hidden'); // ëª¨ë‹¬ ë‹«ê¸°
            fileInput.click(); // íŒŒì¼ ì„ íƒ ì°½ ì—´ê¸°
        });

        // ëª¨ë‹¬ "ë‹«ê¸°" ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ë‹«ê¸°
        modalCloseButton.addEventListener('click', () => {
            modalContainer.classList.add('hidden');
        });

        // í¼ ì œì¶œ ì‹œ ë¡œë”© í™”ë©´ í‘œì‹œ
        function showLoading() {
            uploadSection.classList.add('hidden');
            loadingSection.classList.remove('hidden');
        }

        // í¼ ì œì¶œ
        fileInput.addEventListener('change', () => {
            const form = document.getElementById('uploadForm');
            showLoading();
            form.submit();
        });
    </script>
</body>
</html>
